// SPDX-License-Identifier: MIT
pragma solidity ^0.8.25;

import {Script} from "forge-std/Script.sol";
import {CumulativeMerkleDrop} from "../../src/merkle-drop/CumulativeMerkleDrop.sol";
import {UUPSProxy} from "../../src/UUPSProxy.sol";

import "@layerzerolabs/lz-evm-messagelib-v2/contracts/uln/UlnBase.sol";
import "@layerzerolabs/lz-evm-protocol-v2/contracts/interfaces/IMessageLibManager.sol";
import {console} from "forge-std/console.sol";

contract DeploySepoliaMerkleDrop is Script {
    // These values should be replaced with testnet addresses
    address constant BASE_SEPOLIA_LZ_ENDPOINT = 0x6EDCE65403992e310A62460808c4b910D972f10f;
    address constant MAINNET_SEPOLIA_LZ_ENDPOINT = 0x6EDCE65403992e310A62460808c4b910D972f10f;

    address constant BASE_KING_TOKEN = address(0);
    address constant OFT_ADAPTER = address(0);
    address constant KING_PROTOCOL_OWNER = 0xD0d7F8a5a86d8271ff87ff24145Cf40CEa9F7A39;

    uint32 constant BASE_SEPOLIA_EID = 40245; 
    uint32 constant MAINNET_SEPOLIA_EID = 40161;

    address constant MAINNET_MERKLE = 0x5794027bd3aF93218e10C5B9Fc9E1EE338140f5B;
    address constant BASE_MERKLE = 0xC013bff2a04BE559aC3fD4ee73569470ebb42390;

    address constant BASE_SEPOLIA_SEND_LIB = 0xC1868e054425D378095A003EcbA3823a5D0135C9;
    address constant BASE_SEPOLIA_RECEIVE_LIB = 0x12523de19dc41c91F7d2093E0CFbB76b17012C8d;

    address constant MAINNET_SEPOLIA_SEND_LIB = 0xcc1ae8Cf5D3904Cef3360A9532B477529b177cCE;
    address constant MAINNET_SEPOLIA_RECEIVE_LIB = 0xdAf00F5eE2158dD58E0d3857851c432E34A3A851;

    // forge script script/cross-chain-merkle-testnet/SepoliaDeployment.s.sol --rpc-url https://eth-sepolia.public.blastapi.io --via-ir
    // forge script script/cross-chain-merkle-testnet/SepoliaDeployment.s.sol --rpc-url https://sepolia.base.org --via-ir --verify --etherscan-api-key $BASE_ETHERSCAN_KEY --chain-id 84532
    function run() external {
        uint256 deployerPrivateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(deployerPrivateKey);

        // default to mainnet sepolia as the deployment is done on mainnet sepolia
        address DEPLOYMENT_LZ_ENDPOINT = MAINNET_SEPOLIA_LZ_ENDPOINT;
        uint32 DEPLOYMENT_PEER_EID = BASE_SEPOLIA_EID;
        address DEPLOYMENT_PEER_MERKLE = BASE_MERKLE;
        address DEPLOYMENT_SEND_LIB = MAINNET_SEPOLIA_SEND_LIB;
        address DEPLOYMENT_RECEIVE_LIB = MAINNET_SEPOLIA_RECEIVE_LIB;
        if (block.chainid == 84532) {
            DEPLOYMENT_LZ_ENDPOINT = BASE_SEPOLIA_LZ_ENDPOINT;
            DEPLOYMENT_PEER_EID = MAINNET_SEPOLIA_EID;
            DEPLOYMENT_PEER_MERKLE = MAINNET_MERKLE;
            DEPLOYMENT_SEND_LIB = BASE_SEPOLIA_SEND_LIB;
            DEPLOYMENT_RECEIVE_LIB = BASE_SEPOLIA_RECEIVE_LIB;
        }

        // 1. Deploy implementation
        // address implementation = address(
        //     new CumulativeMerkleDrop(
        //         BASE_KING_TOKEN,
        //         DEPLOYMENT_LZ_ENDPOINT,
        //         OFT_ADAPTER
        //     )
        // );

        // // 2. Deploy proxy with implementation
        // CumulativeMerkleDrop cumulativeMerkleDrop = CumulativeMerkleDrop(payable(address(
        //     new UUPSProxy(
        //         implementation,
        //         abi.encodeWithSelector(
        //             CumulativeMerkleDrop.initialize.selector,
        //             0,
        //             KING_PROTOCOL_OWNER,
        //             KING_PROTOCOL_OWNER
        //         )
        //     )
        // )));

        // // 3. Initialize LayerZero
        // cumulativeMerkleDrop.initializeLayerZero();

        // // 4. Grant admin role
        // cumulativeMerkleDrop.grantRole(
        //     cumulativeMerkleDrop.OPERATING_ADMIN_ROLE(),
        //     KING_PROTOCOL_OWNER
        // );

        // // 5. Add mainnet chain as peer
        // CumulativeMerkleDrop(payable(address(BASE_MERKLE))).addChain(
        //     DEPLOYMENT_PEER_EID,
        //     300_000, // gas limit
        //     bytes32(uint256(uint160(DEPLOYMENT_PEER_MERKLE)))
        // );

        // IMessageLibManager(DEPLOYMENT_LZ_ENDPOINT).setConfig(
        //     address(cumulativeMerkleDrop), 
        //     DEPLOYMENT_RECEIVE_LIB,
        //     getDVNConfig(DEPLOYMENT_PEER_EID)
        // );
        // IMessageLibManager(DEPLOYMENT_LZ_ENDPOINT).setConfig(
        //     address(cumulativeMerkleDrop), 
        //     DEPLOYMENT_SEND_LIB,
        //     getDVNConfig(DEPLOYMENT_PEER_EID)
        // );

        // vm.stopBroadcast();

        // console.log("CumulativeMerkleDrop deployed to:", address(cumulativeMerkleDrop));
        // console.log("Implementation deployed to:", implementation);

        // address[] memory addresses = generateRandomAddresses(150);
        // CumulativeMerkleDrop(payable(address(MAINNET_MERKLE))).batchSetClaimEid(addresses, BASE_SEPOLIA_EID);

        address target = 0x8A3D588D9f6AC041476b094f97FF94ec30169d3D;

        // Prepare raw calldata bytes
        bytes memory rawCalldata = hex"cfc325700000000000000000000000000000000000000000000000000000000000000020000000000000000000000000c013bff2a04be559ac3fd4ee73569470ebb423900000000000000000000000000000000000000000000000000000000000009ce10000000000000000000000005794027bd3af93218e10c5b9fc9e1ee338140f5b00000000000000000000000000000000000000000000000000000000000000023b4206be434e74f1a954f67cc6610c861cf97393324472ef45e723cf7fd879be00000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000002740000000000000000000000000000000000000000000000000000000000004de180000000000000000000000000000000000000000000000000000000000002620000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000001340000000000000000000000000000000000000000000000000000000000000009600000000000000000000000088386fc84ba6bc95484008f6362f93160ef3e563000000000000000000000000717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6000000000000000000000000c41b3ba8828b3321ca811111fa75cd3aa3bb5ace0000000000000000000000002f12db2869c3395a3b0502d05e2516446f71f85b0000000000000000000000004fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b0000000000000000000000002d0c79bb0604c104a5fb6f4eb0703f3154bb3db000000000000000000000000065115c16c04f3efc82aaedc97be59f3f377c0d3f0000000000000000000000002954155ab7b0942694bea4ce44661d9a8736c6880000000000000000000000000a3214154f22a0a2b415b23a84c8169e8b636ee30000000000000000000000000d9f60077f6af931a8bbf590da0223dacf75c7af00000000000000000000000016cc6a92839c986682d98bc35f958f4883f9d2a80000000000000000000000009bbf987a2551717b34e79f33b5b1008d1fa01db90000000000000000000000002606531493a51404a002842f56009d7e5cf4a8c700000000000000000000000044f2a3385c8033acd3af97e9423a695e81ad1eb5000000000000000000000000822329ed19e8244eff582cc204f8554c3620c3fd000000000000000000000000d9d693a074039d026cf4ea4240b40f7d581ac80200000000000000000000000045f9d819d87b734759afb55fe2de5cb82a9ae672000000000000000000000000e4425bc18fa8019c68028196b546d1669c200c680000000000000000000000009eca9d215f8307e33aebe50379bc5a3617ec344400000000000000000000000057b3bf0ec28a930d40b0d285d93c06501cf6a090000000000000000000000000eed1dbda4e52ab073b1f9285be6e155d9c38d4ec0000000000000000000000007ef0a66cd03dbb9538908a6a81d96026b71ec475000000000000000000000000f669e58cfaf9dc25ddcd0702e87d69c7b51242890000000000000000000000007f72d758e1cf3343756d543badbf24212bed8c1500000000000000000000000010b3e3a8afaf69f83600ae24db354391d2378d2e00000000000000000000000094c914197f3ccb46be2900f4698fd0ef743c96950000000000000000000000007b2617b8224fdfd1ea7234eea573a6ff665ff63e000000000000000000000000902f40c356527a7955687113db5f9a85ad579dc10000000000000000000000002637e6b1b523bdd0e4d4d50af5cd23dd4500a211000000000000000000000000fa9143369579dd7d760fe20a2c09680fc146134f000000000000000000000000454034b2b14cf2b85c730dca9a539ca82cb6e3500000000000000000000000004b77ca23440b19d4866cca721c801278fd08d80700000000000000000000000034f5ecd8389ae0432af62dc132a24118292866bb0000000000000000000000009920310382d968ebcc4b1771f41c6b304205b5700000000000000000000000001ee8ddca6894550dca6916ea2ac6baa90d11e5100000000000000000000000006cc2c704584312bdd8781b32d5d06abda57f42300000000000000000000000000c18a052f57e5fd03b4758a09f30f5ddc4b22ec4000000000000000000000000c935ac46b8671f0e062baaa62a7545ba53bb6e4c0000000000000000000000006e73460df9fa5214e3ef23dd4259ca09493a3594000000000000000000000000bcba2c46958e61fa2fb4042cd7bc5816a710195b000000000000000000000000b4571d58682c0d66212ec634d495f33de3f77ab50000000000000000000000003ebc0ae081ba8556a00cd122038841867181caac0000000000000000000000007bcc1d1292cf3e4b2a6b63f48335cbde5f7545d2000000000000000000000000bf2566af7bd15b87fc985d01f5094b89e3669e4f0000000000000000000000002e90eac0dd9026dad28fa317782a135f28a8609100000000000000000000000037ffcb6f3ec23b7793efc5eaf5e71b7b406c5c06000000000000000000000000985ec0218b5e68502e230525f544285b2bdf3d7e000000000000000000000000f162068ff39ccea4075cb95e1a30f86995b5b7ee00000000000000000000000037cd85351bf564556780cf8c1157a220f31f0cbb0000000000000000000000009e9bf9dec12c5cef146f93a5eee56772ee647fbc000000000000000000000000f8964c9a443b862f02d4c7611d18c2bc4e6ff6970000000000000000000000009efd8b0e15aa447e21bfd7f41283bb54e22c9a82000000000000000000000000366840eb658911794f2c3a44c450aa2c505186c1000000000000000000000000d9c430549c5b31f8aa5c5848151c0a55f473c34d0000000000000000000000001954ec4fc2c08429ae2122118bf234b2185c81b8000000000000000000000000fb3fd7d7174edc9ece837694ce50f7078f7c31ae000000000000000000000000b68959049485df8aa97b39f3533039af5f45619900000000000000000000000003d1e69c18a3c7be080eb86a81e0578814ee58d3000000000000000000000000f3fa939673403dd35c97de392fdb343b4015ce9e0000000000000000000000002d057c2966e251e132af3691db153ab65f0d1a4d0000000000000000000000006cd16846b93b752a170ff24824098b31aa008a7e0000000000000000000000008e19074452862cd65fd4b9a11f0336d1ac6d1dc300000000000000000000000053164a3b48076eb3138f466adeeb9dec7bb31f70000000000000000000000000306849f9b7b1200073105cd9aeb554a1802b58fd00000000000000000000000077524172e9bc20f1b719b6cef0fc24f64db8e15e000000000000000000000000775984a1337d15dc1bf4ce50f41988b2a2b336a70000000000000000000000003b448cb5161a639b899a14825ba9c8d7892eb8c30000000000000000000000002d04036d3b33a9474db32a71b71135c695102793000000000000000000000000a932c96fbe302b36a1aad1d95cab54f9e0a135ea000000000000000000000000d2c9389d07f2b73d0e996161dfac6f1043b5fc0b00000000000000000000000092c26c2c6a4beb9ae5ead9912c98b2595c8423100000000000000000000000009506f60b5ca9f18fc90635e729d3cfe13abcf0010000000000000000000000006dbac29221fa3c2646adbc8effedab98152ff32b00000000000000000000000016862f9a8fd41a7bc266c723bf77df7866d75f5500000000000000000000000008c6f4a76181fe75021370ab5e6abd22b1792a2a000000000000000000000000df2d53ed643fdd750aef9eda90dc7c8759a104a8000000000000000000000000f9c9683a9404da2c5d329c733ab84f150db798a8000000000000000000000000ae8ad83bb92a45fcb47761fa4a12f5b6316c2b200000000000000000000000004c6c68a0a27eca0b88fce820bdd99c3dc223dcc7000000000000000000000000be102e6bec069ee42c61080745e8825470e80c6c000000000000000000000000ed29336ab75e80a9b7855030760b2917b01e568a000000000000000000000000712848b1114bad8a1a4ae195e5abe0ec38021b940000000000000000000000007f4696ed47ec83317d61501b76366dbcca65ce73000000000000000000000000d02b996df5fdc3d20660e61600390aad6d5f7f1e0000000000000000000000002f008f4f8cdad0586d8ce5113e9e09dcc6860619000000000000000000000000a066d10b7ce81d7ac2ad9874daac46e2282f6b450000000000000000000000000871433ba612011908963bb42a64f42d65ad2f72000000000000000000000000e9d96c14a4fffaee9f45bcae0c407968a7109630000000000000000000000000fa3496f47a2a2f0f12c8aeb78a008ace6ae55ca500000000000000000000000084df1387cdd652e7726b8ccda3db4859e02f31bf000000000000000000000000eb3ecbcbd0979e0c977ac1dee06c6e01a60aca1b000000000000000000000000d63c6948b8f3422055fac1d836349b01722e9c520000000000000000000000008b9e449c2e4aee4dc9b4e96ab592f9f497d051380000000000000000000000004bfe0d7d0f27b7fdbefc8bbccdd23188fc71fe7f000000000000000000000000205d9aefef7487c819e77d3351630820dbff1118000000000000000000000000bd897847c5911dc7d317b3175e0b0851983499730000000000000000000000009bf63841c71ff191e9189522bad8ebff5d4eca98000000000000000000000000233d4e26853b3a7b8157bbd9f41f280a0f1cee9b000000000000000000000000611610bedb31614179330261bfd87a41347cae1c000000000000000000000000017aa108a0a1469249f92c8f022b9dbafa87b883000000000000000000000000ed70fa5c6798ac55062a4803121a869731e308d20000000000000000000000000ef7168fbea05faf9251824ca5043f113cc6a7c70000000000000000000000009e2fbfcfa2ebea26501294aa02cbfcfb12e9435400000000000000000000000063c7023ecb40f923f97916639c598592fa30d6ae00000000000000000000000003c77babc8b33d7f2e7b450e2966db0c22097753000000000000000000000000c0a24601252c2a42c2220ca988efcfe399914308000000000000000000000000ab296045d8f41cc5607279db17b218cab0929a51000000000000000000000000d65c5b0d25665b1ce17980f0da43c0ed545f98b40000000000000000000000002ba61bcd3078d4c02c39a186ec16f21883fbe016000000000000000000000000f467dd4bb5c305fbfb6b04eab8faaabeec1e18d8000000000000000000000000ea66b8f84dd0f5f5351ecffe72b952cd9db7142a00000000000000000000000033d81accf578af4a06c5fa6b0d038cae36e12711000000000000000000000000ca644cf24f86dc1312fe715484e3c4aead5eb78b000000000000000000000000bb2664842857e148fcbb5188386c8cd40348d5b6000000000000000000000000d9416d51137a03d3fabec7141025c62663253fe100000000000000000000000021d60de7c2bd0db944d23c900c0c0e775f530052000000000000000000000000534364cc0b3fd1ea9b651e79c7f50a59d48ef813000000000000000000000000736696119c195c1a9f5eae642d3c5fcd44e49dea000000000000000000000000fe1303cb223f03b90d857fd0573f003f79fefed400000000000000000000000004a76a660d77039093bac314de0816a16392aff1000000000000000000000000638d2dfd04e09e1ec783ede9aac77da9c5a0dac40000000000000000000000004a3ab63aa9daf934a52ffce891945b7fb622d79100000000000000000000000044770b82cc77924aef333c927ce6bdd2cdb3ae03000000000000000000000000e7a5310c7c0473331d13dc9fafe143b2c4e8148a00000000000000000000000016e22c226cee16a955fef88c618922096dae2fd00000000000000000000000003343947ed0fdf88d251e9bd2a5519d3d6162d222000000000000000000000000db7bcda7d0cffee8545442e682273ba01a6203a700000000000000000000000095ed74887b7caf321dd83b21e04d77c11538340800000000000000000000000039fc4dd21bd59163db798899cf56cef48b3c9ec9000000000000000000000000126fc49ecb9cca2fa94b5c726f6ec1109b89141400000000000000000000000048ff0fecec8fc59649ca8625094bebd9bd2e4035000000000000000000000000c533e486ff1f24f42a31819e91b624931060a86300000000000000000000000028e8cd2feb871efa71e955ad24477aafb09484fa00000000000000000000000048f5a4e3eedb34dba437fdcbe6d26496b68afe87000000000000000000000000059479854246a026d947c13d5a0929bc8c1bc81d000000000000000000000000df7e0245486fbc64ab975cd431a39533032d541500000000000000000000000010816a0355b91a50eca2778837fb82da8448ecf6000000000000000000000000d300d90bbdc659f169ca1469ec86b4960f7266cb0000000000000000000000001af04b52bdd40b9b51275f279ea47e93547b631e000000000000000000000000cf3cfb1a6cee971c1ebb16f2c6bd23c2d642728e000000000000000000000000f396328c64c25e226c1867318158f7f2cbdd40a9000000000000000000000000ddcc01a03360ba61ca7784a744e757488bf8ceb20000000000000000000000000ff4e9db7580d269b423d9f61470b370819cbd1700000000000000000000000002bc8075ef67e23a2be359965ea316e78e1eff3f000000000000000000000000e7a106b15d8eb282dd6b3e1914c73d80668964120000000000000000000000006682fdb2032455c0e50143742135fbbe809bd793000000000000000000000000e3db9e69a5131d2269f862bfcd05a0b38f6abf7f000000000000000000000000e5e87bef0a2eb0c00bcd4efdd01050293f5fac9100000000000000000000000071527c753f6167484f14b94c4a3bd2997516725c000000000000000000000000189f60c984ceaaa7a8494fc67f9f8f4de8ccf2c6000000000000000000000000000000000000000000000000000000000000009600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000001bc16d674ec8000000000000000000000000000000000000000000000000000029a2241af62c00000000000000000000000000000000000000000000000000003782dace9d9000000000000000000000000000000000000000000000000000004563918244f4000000000000000000000000000000000000000000000000000053444835ec5800000000000000000000000000000000000000000000000000006124fee993bc00000000000000000000000000000000000000000000000000006f05b59d3b2000000000000000000000000000000000000000000000000000007ce66c50e28400000000000000000000000000000000000000000000000000008ac7230489e8000000000000000000000000000000000000000000000000000098a7d9b8314c0000000000000000000000000000000000000000000000000000a688906bd8b00000000000000000000000000000000000000000000000000000b469471f80140000000000000000000000000000000000000000000000000000c249fdd327780000000000000000000000000000000000000000000000000000d02ab486cedc0000000000000000000000000000000000000000000000000000de0b6b3a76400000000000000000000000000000000000000000000000000000ebec21ee1da40000000000000000000000000000000000000000000000000000f9ccd8a1c508000000000000000000000000000000000000000000000000000107ad8f556c6c0000000000000000000000000000000000000000000000000001158e460913d00000000000000000000000000000000000000000000000000001236efcbcbb340000000000000000000000000000000000000000000000000001314fb370629800000000000000000000000000000000000000000000000000013f306a2409fc00000000000000000000000000000000000000000000000000014d1120d7b16000000000000000000000000000000000000000000000000000015af1d78b58c4000000000000000000000000000000000000000000000000000168d28e3f0028000000000000000000000000000000000000000000000000000176b344f2a78c00000000000000000000000000000000000000000000000000018493fba64ef000000000000000000000000000000000000000000000000000019274b259f6540000000000000000000000000000000000000000000000000001a055690d9db80000000000000000000000000000000000000000000000000001ae361fc1451c0000000000000000000000000000000000000000000000000001bc16d674ec800000000000000000000000000000000000000000000000000001c9f78d2893e40000000000000000000000000000000000000000000000000001d7d843dc3b480000000000000000000000000000000000000000000000000001e5b8fa8fe2ac0000000000000000000000000000000000000000000000000001f399b1438a100000000000000000000000000000000000000000000000000002017a67f7317400000000000000000000000000000000000000000000000000020f5b1eaad8d800000000000000000000000000000000000000000000000000021d3bd55e803c00000000000000000000000000000000000000000000000000022b1c8c1227a0000000000000000000000000000000000000000000000000000238fd42c5cf04000000000000000000000000000000000000000000000000000246ddf9797668000000000000000000000000000000000000000000000000000254beb02d1dcc0000000000000000000000000000000000000000000000000002629f66e0c530000000000000000000000000000000000000000000000000000270801d946c9400000000000000000000000000000000000000000000000000027e60d44813f800000000000000000000000000000000000000000000000000028c418afbbb5c00000000000000000000000000000000000000000000000000029a2241af62c00000000000000000000000000000000000000000000000000002a802f8630a240000000000000000000000000000000000000000000000000002b5e3af16b1880000000000000000000000000000000000000000000000000002c3c465ca58ec0000000000000000000000000000000000000000000000000002d1a51c7e00500000000000000000000000000000000000000000000000000002df85d331a7b40000000000000000000000000000000000000000000000000002ed6689e54f180000000000000000000000000000000000000000000000000002fb474098f67c00000000000000000000000000000000000000000000000000030927f74c9de000000000000000000000000000000000000000000000000000031708ae004544000000000000000000000000000000000000000000000000000324e964b3eca8000000000000000000000000000000000000000000000000000332ca1b67940c000000000000000000000000000000000000000000000000000340aad21b3b7000000000000000000000000000000000000000000000000000034e8b88cee2d400000000000000000000000000000000000000000000000000035c6c3f828a3800000000000000000000000000000000000000000000000000036a4cf636319c0000000000000000000000000000000000000000000000000003782dace9d9000000000000000000000000000000000000000000000000000003860e639d8064000000000000000000000000000000000000000000000000000393ef1a5127c80000000000000000000000000000000000000000000000000003a1cfd104cf2c0000000000000000000000000000000000000000000000000003afb087b876900000000000000000000000000000000000000000000000000003bd913e6c1df40000000000000000000000000000000000000000000000000003cb71f51fc5580000000000000000000000000000000000000000000000000003d952abd36cbc0000000000000000000000000000000000000000000000000003e733628714200000000000000000000000000000000000000000000000000003f514193abb84000000000000000000000000000000000000000000000000000402f4cfee62e8000000000000000000000000000000000000000000000000000410d586a20a4c00000000000000000000000000000000000000000000000000041eb63d55b1b000000000000000000000000000000000000000000000000000042c96f409591400000000000000000000000000000000000000000000000000043a77aabd0078000000000000000000000000000000000000000000000000000448586170a7dc0000000000000000000000000000000000000000000000000004563918244f4000000000000000000000000000000000000000000000000000046419ced7f6a4000000000000000000000000000000000000000000000000000471fa858b9e0800000000000000000000000000000000000000000000000000047fdb3c3f456c00000000000000000000000000000000000000000000000000048dbbf2f2ecd000000000000000000000000000000000000000000000000000049b9ca9a694340000000000000000000000000000000000000000000000000004a97d605a3b980000000000000000000000000000000000000000000000000004b75e170de2fc0000000000000000000000000000000000000000000000000004c53ecdc18a600000000000000000000000000000000000000000000000000004d31f847531c40000000000000000000000000000000000000000000000000004e1003b28d9280000000000000000000000000000000000000000000000000004eee0f1dc808c0000000000000000000000000000000000000000000000000004fcc1a89027f000000000000000000000000000000000000000000000000000050aa25f43cf540000000000000000000000000000000000000000000000000005188315f776b800000000000000000000000000000000000000000000000000052663ccab1e1c00000000000000000000000000000000000000000000000000053444835ec580000000000000000000000000000000000000000000000000000542253a126ce400000000000000000000000000000000000000000000000000055005f0c6144800000000000000000000000000000000000000000000000000055de6a779bbac0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        // Make the call and capture return data
        (bool success, bytes memory returnData) = target.call(rawCalldata);

    }

    function generateRandomAddresses(uint256 count) internal returns (address[] memory) {
        address[] memory addresses = new address[](count);
        
        for (uint256 i = 0; i < count; i++) {
            // Generate a random address using keccak256
            bytes32 hash = keccak256(abi.encodePacked(i));
            // Convert the first 20 bytes of the hash to an address
            addresses[i] = address(uint160(uint256(hash)));
        }
        
        return addresses;
    }

    function getDVNConfig(uint32 eid) internal view returns (SetConfigParam[] memory) {
        SetConfigParam[] memory params = new SetConfigParam[](1);
        address[] memory requiredDVNs = new address[](1);
        requiredDVNs[0] = 0x8eebf8b423B73bFCa51a1Db4B7354AA0bFCA9193; // LZ DVN mainnet sepolia
        if (block.chainid == 84532) {
            requiredDVNs[0] = 0xe1a12515F9AB2764b887bF60B923Ca494EBbB2d6; // LZ DVN base sepolia
        }

        UlnConfig memory ulnConfig = UlnConfig({
            confirmations: 15,
            requiredDVNCount: 1,
            optionalDVNCount: 0,
            optionalDVNThreshold: 0,
            requiredDVNs: requiredDVNs,
            optionalDVNs: new address[](0)
        });

        params[0] = SetConfigParam(eid, 2, abi.encode(ulnConfig));

        return params;
    }
}
